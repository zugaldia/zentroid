function Zentroid(f){var a={},g="#"+f,d=[],b,e,h=L.Icon.extend({iconUrl:"./static/glyphicons_207_remove_2@2x_orange.png",iconSize:new L.Point(37,38)});a.set_message=function(a){$(g).text(a)};a.map_setup=function(i){b=(new L.Map(i)).setView(new L.LatLng(38.895111,-77.036667),15);wax.tilejson("http://a.tiles.mapbox.com/v3/zugaldia.map-qshm3c0v.jsonp",function(c){b.addLayer(new wax.leaf.connector(c));a.set_message("Map loaded.")});b.on("click",function(c){d.push(c.latlng);c=new L.Marker(c.latlng);b.addLayer(c);
a._update_centroid()})};a.switch_google=function(){a.set_message("Switched to Google Maps.")};a.switch_mapbox=function(){a.set_message("Switched to MapBox.")};a._update_centroid=function(){1<d.length&&(e&&b.removeLayer(e),e=new L.Marker(a._get_centroid_coordinates(),{icon:new h}),b.addLayer(e),a.set_message("The X marks the spot."))};a._get_centroid_coordinates=function(){for(var a=0,c=0,b=0;b<d.length;b++)a+=d[b].lat,c+=d[b].lng;return new L.LatLng(a/d.length,c/d.length)};return a}
$(document).ready(function(){Zentroid("zentroid-message").map_setup("zentroid-map");$("#zentroid-layer-form").hide()});
